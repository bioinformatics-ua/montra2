# -*- coding: utf-8 -*-
# Copyright (C) 2014 Universidade de Aveiro, DETI/IEETA, Bioinformatics Group - http://bioinformatics.ua.pt/
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.
from questionnaire.models import *
from searchengine.models import *
from django.shortcuts import render_to_response, get_object_or_404
import sys

questionID = 5327
text = "<strong>Context</strong>\n<div>\n    <div>\n        <p>\n            \n        </p>\n        <p>\n            <strong></strong>\n        </p>\n        <p>\n            From EMIF D9.1 Initial requirements and benchmarks set:\n        </p>\n        <p>\n            Use Case 2 (UC2): Data base fingerprint feeding/maintenance\n        </p>\n        <p>\n            Use Case 3 (UC3): Data base fingerprint browsing for data base selection\n        </p>\n        <p>\n            <strong></strong>\n        </p>\n        <p>\n            <strong>Sources:</strong>\n        </p>\n        <ol start=\"1\" type=\"1\">\n            <li>\n                EMIF D10.1 “Initial database fingerprinting”\n                <a href=\"https://emif.teamworkpm.net/?action=viewFile&amp;fileId=233637&amp;v=1\">\n                    https://emif.teamworkpm.net/?action=viewFile&amp;fileId=233637&amp;v=1\n                </a>\n                (restricted access)\n            </li>\n            <li>\n                Survey from the UK Medical Research Council (2011) + EMIF D10.1\n            </li>\n            <li>\nThe ENCePP Database of Research Resources is part of the European Network of Centres for Pharmacoepidemiology and Pharmacovigilance                <a href=\"http://www.encepp.eu\">http://www.encepp.eu</a>\n            </li>\n            <li>\n                B.R.I.D.G.E. TO DATA <a href=\"http://www.bridgetodata.org\">http://www.bridgetodata.org</a>\n            </li>\n            <li>\n                GRIP survey on electronic health care databases <a href=\"http://www.grip-network.org\">http://www.grip-network.org</a>\n            </li>\n            <li>\n                <em>Biobanking and Biomolecular Resources Research Infrastructure (BBMRI) <a href=\"http://bbmri.eu\">http://bbmri.eu</a> </em>\n            </li>\n        </ol>\n        <p>\n            <strong>Background and purpose:</strong>\n        </p>\n        <p>\n            In EMIF/Platform, a number of organisations who are able to provide data for research are working together towards an infrastructure to facilitate\n            re-use of medical data. These organisations provide access to one or more data bases [1].\n        </p>\n        <p>\n            The purpose of fingerprinting the data bases in the platform is to allow potential EMIF users to gain an understanding in the content, procedures\n            and capabilities of the various data bases. The descriptive information collected through this process will be incorporated in a browser that will\n            support searching the fingerprints. Ideally this browser would help the end user in an initial assessment regarding the relevance of these data\n            bases for their research questions.\n        </p>\n        <p>\n            Fingerprinting should not be confused with primary data extraction. Fingerprinting is based on responses of data bases in questionnaires.\n            Fingerprinting does not involve processing or retrieving actual patient data. In a next step of the EMIF-platform, primary data extraction will\n            involve the actual extraction of aggregated data.\n        </p>\n        <p>\n            In this second version of the fingerprint questionnaire, a number of items are still requested in a free text (narrative) format. The reason we\n            have chosen to use free text is that we need to understand the scope of possible answers before we can move to a multiple choice format. We\n            envision that in a future version of this questionnaire, we will reduce the number of free text response fields and increase the number of\n            questions with multiple, predefined options.\n        </p>\n        <p>\n            All your answers will be only available to the EMIF participants. We do envision that in future some of the information provided in this\n            questionnaire will be distributed more widely. Before the information is distributed outside the EMIF-consortium, we will seek approval of the\n            organisation involved.\n        </p>\n        <p>\n            <strong>Main headings:</strong>\n        </p>\n        <p>\n            <strong></strong>\n        </p>\n        <ol start=\"1\" type=\"1\">\n            <li>\n                Database Administrative Information\n            </li>\n            <li>\n                Database Characteristics\n            </li>\n            <li>\n                Database Population\n            </li>\n            <li>\n                Data Held\n            </li>\n            <li>\n                Ability to Gather Supplementary Data\n            </li>\n            <li>\n                Ethical Issues\n            </li>\n            <li>\n                De-identification, Linkage\n            </li>\n            <li>\n                Data Set Description, Metadata\n            </li>\n            <li>\n                Examples of Events and Outcomes\n            </li>\n            <li>\n                Documents and Publications\n            </li>\n            <li>\n                Comments\n            </li>\n            <li>\n                EMIF Database Fingerprint Provenance\n            </li>\n        </ol>\n        <p>\n            <strong>Brief description of main headings:</strong>\n        </p>\n        <p>\n            In the section “<em>Database Administrative Information</em>”, we focus on administrative details of the data base. Contact details, organisation\n            responsible for maintaining the data base, and funding are covered.\n        </p>\n        <p>\n            In the section “<em>Database Characteristics</em>”, we focus on the type of database, when the data collection started, and the frequency of\n            updates.\n        </p>\n        <p>\n            In the section “<em>Database Population</em>”, we focus on the source population of the data source. We pay particular attention to the reasons for\n            inclusion in the data base, the number of patients in the base, and the average follow-up time.\n        </p>\n        <p>\n            In the section “<em>Data Held</em>”, we take a closer look at the available data in the data base. For different categories of data (e.g.,\n            diagnosis, medication, laboratory results, etc), we ask questions such as whether the class of data is available, what the source of the data is,\n            how it is recorded (in what coding system), etc.\n        </p>\n        <p>\n            In the section “<em>Ability to Gather Supplementary Data</em>”, we focus on the ability of the data base to obtain, for specific studies,\n            additional information or the possibility re-contact the patient for bio material.\n        </p>\n        <p>\n            In the section “<em>Ethical Issues</em>” we take a closer look at how the ethical and governance issues in the data base are organised. We document\n            the procedure by which ethical approval may be obtained.\n        </p>\n        <p>\n            In the section “<em>De-identification, Linkage</em>”, we pose a number of questions regarding the methods for de-identification and the ability of\n            the data base to link to other data bases. Also the issue of releasing patient-level data to external partners is covered.\n        </p>\n        <p>\n            In the section “<em>Data Set Description, Metadata</em>”, we focus on the available data dictionaries and data models.\n        </p>\n        <p>\n            In the section “<em>Examples of Events and Outcomes</em>”, we ask a number of questions which are of particular relevance of the two vertical EMIF\n            projects. In this section, we want to determine whether for the patients in the data base, a number of variables that are of interest for the\n            vertical projects would be available. The list of variables is by no means exhaustive – the objective is to get a first impression on whether or\n            not the type of information requested could, in principle, be retrieved.\n        </p>\n        <p>\n            In the section “<em>Documents and Publications</em>”, we focus on whether or not certain documents would be available for use in the EMIF\n            consortium. When the documents are available, we also identify the mechanism by which the documents could be obtained.\n        </p>\n        <p>\n            In the section “<em>Comments</em>”, we provide a general field to allow the data base to provide any additional comments they believe to be\n            relevant in describing their data base.\n        </p>\n        <p>\n            Finally, in the section “<em>EMIF Database Fingerprint Provenance</em>”, we document of number of aspects that are aimed at tracing the source and\n            history of updates of the fingerprint.\n        </p>\n    </div>\n    <div>\n        <br clear=\"all\"/>\n        <hr align=\"left\" size=\"1\" width=\"33%\"/>\n        <div id=\"ftn1\">\n            <p>\n                [1]\n                The term data base is often used with different meanings. In the IT-context, data base refers to the environment that allows you to define a\n                set of tables and fields, and the ability to query the data stored. In EMIF, however, we mean with the term data base not only the data\n                themselves, but also the organizational and governance procedures associated with that data base and the research capabilities of the\n                organization responsible for that data base. Although the use of the term data base in this meaning maybe sub-optimal, it is common practice.\n                For example, in Rotterdam IPCI is the general practice data base with a set of tables and fields. For the purpose of this questionnaire, IPCI\n                refers not only to the tables and fields, but also to the governance rules and capabilities of the team maintaining the database (e.g., ability\n                to re-contact the patient).\n            </p>\n        </div>\n    </div>\n</div>\n<div>\n    <div id=\"ftn1\">\n    </div>\n</div>"

qsets = Question.objects.filter(id=questionID)
print qsets
print len(qsets)
for qs in qsets:
 	print qs.text_en
 	qs.text_en = text
 	qs.save()

print "QUITTING"
